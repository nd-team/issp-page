KISSY.add('kg/editor-plugins/1.1.2/link/dialog',["util","editor","../dialog","./utils"],function(S ,require, exports, module) {function e(e,t){var i=this;i.editor=e,i.config=t||{},l.Utils.lazyRun(i,"_prepareShow","_real")}var t=require("util"),l=require("editor"),i=require("../dialog"),r=require("./utils"),a=r.savedHref,n='<div style="padding:20px 20px 0 20px"><p><label>链接网址： <input  data-verify="^(https?://[^\\s]+)|(#.+)$"  data-warning="请输入合适的网址格式" class="{prefixCls}editor-link-url {prefixCls}editor-input" style="width:390px;" /></label></p><p style="margin: 15px 0 10px 0px;"><label>链接名称： <input class="{prefixCls}editor-link-title {prefixCls}editor-input" style="width:100px;"></label> <label><input class="{prefixCls}editor-link-blank" style="vertical-align: middle; margin-left: 21px;" type="checkbox"/> &nbsp; 在新窗口打开链接</label></p></div>',o='<div style="padding:5px 20px 20px;"><a href="javascript:void(\'确定\')" class="{prefixCls}editor-link-ok {prefixCls}editor-button ks-inline-block" style="margin-left:65px;margin-right:20px;">确定</a> <a href="javascript:void(\'取消\')" class="{prefixCls}editor-link-cancel {prefixCls}editor-button ks-inline-block">取消</a></div>';t.augment(e,{_prepareShow:function(){var e=this,r=e.editor,a=r.get("prefixCls"),s=new i({width:500,headerContent:"链接",bodyContent:t.substitute(n,{prefixCls:a}),footerContent:t.substitute(o,{prefixCls:a}),mask:!0}).render();e.dialog=s;var p=s.get("body"),d=s.get("footer");s.urlEl=p.one("."+a+"editor-link-url"),s.urlTitle=p.one("."+a+"editor-link-title"),s.targetEl=p.one("."+a+"editor-link-blank");var u=d.one("."+a+"editor-link-cancel"),c=d.one("."+a+"editor-link-ok");c.on("click",e._link,e),u.on("click",function(e){e.halt(),s.hide()}),l.Utils.placeholder(s.urlEl,"http://")},_link:function(e){e.halt();var i=this,a=i.dialog,n=a.urlEl.val();if(l.Utils.verifyInputs(a.get("el").all("input"))){a.hide();var o={href:n,target:a.targetEl[0].checked?"_blank":"_self",title:t.trim(a.urlTitle.val())};setTimeout(function(){r.applyLink(i.editor,o,i._selectedEl)},0)}},_real:function(){var e=this,t=e.config,i=e.dialog,r=e._selectedEl;if(r){var n=r.attr(a)||r.attr("href");l.Utils.valInput(i.urlEl,n),i.urlTitle.val(r.attr("title")||""),i.targetEl[0].checked="_blank"===r.attr("target")}else l.Utils.resetInput(i.urlEl),i.urlTitle.val(""),t.target&&(i.targetEl[0].checked=!0);i.show()},show:function(e){var t=this;t._selectedEl=e,t._prepareShow()}}),module.exports=e;});